<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <!-- Ajax를 사용하기 위한 JQuery CDN 적용 -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
</head>
<body>

  <label for="memberId">아이디</label><input type="text" id="memberId" name="memberId" placeholder="아이디를 입력해주세요."> <br>
  <label for="memberPass">비밀번호</label><input type="password" id="memberPass" name="memberPass" placeholder="비밀번호를 입력해주세요."> <br>
  <input type="button" onclick="login()" value="로그인"> <!-- 08.31 기존 submit버튼에서 일반 button으로 교체 (태호) -->
  <button type="button" onclick="location.href='/member/FindId'">아이디 찾기</button>  <!-- 08.31 아이디찾기, 비밀번호 변경 추가 -->
  <button type="button" onclick="location.href='/member/FindPw'">비밀번호 변경</button>

</body>
<script th:inline="javascript">
  const login = () => {
    const loginId = document.querySelector("#memberId").value;
    const loginPass = document.querySelector("#memberPass").value;

    console.log("입력아이디 : " + loginId);
    console.log("입력비밀번호 : " + loginPass);

    const params = {
      "memberId": loginId,
      "memberPass": loginPass
    }

    if(loginId == "" || loginId == null) {
      alert("아이디를 입력해주세요.")
    } else if(loginPass == "" || loginPass == null) {
      alert("비밀번호를 입력해주세요.")
    } else {
      $.ajax({
        type: "post",
        url: "/member/login",
        data: JSON.stringify(params),
        contentType: "application/json",

        success: function (res) {
          alert("로그인 성공");
          location.href = "/"
        },
        error: function (res) {
          alert("아이디 혹은 비밀번호가 올바르지 않습니다.")
        }
      })
    }

  }
</script>
</html>