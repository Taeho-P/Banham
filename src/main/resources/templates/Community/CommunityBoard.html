<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ììœ  ê²Œì‹œíŒ</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content=" "/>
    <meta name="keywords" content=""/>
    <meta content="Pichforest" name="author"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

    <!-- Bootstrap css -->
    <link rel="shortcut icon" href="images/favicon.ico">

    <!-- Bootstrap css -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css" id="bootstrap-style" />

    <!-- Material Icon Css -->
    <link rel="stylesheet" href="/css/materialdesignicons.min.css" type="text/css" />

    <!-- Unicon Css -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />

    <!-- Custom Css -->
    <link rel="stylesheet" href="/css/style.min.css" type="text/css" />

</head>
<body data-bs-spy="scroll" data-bs-target="#navbar-navlist" data-bs-offset="71">
<!--Start Navbar-->
<div th:replace="/header :: header"></div>
<!--end Navbar-->

<section class="section position-relative overflow-hidden"
         style="background-image: url(/images/login_bg.png); background-repeat: no-repeat; background-size: cover;top: 95px;">
    <div class="content-wrapper container ">
        <div class="row mt-4">
            <div class="col-lg-12">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb default mb-0">
                        <li class="breadcrumb-item">
                            <a href="/" class="text-muted">í™ˆ</a>
                        </li>
                        <li class="breadcrumb-item active text-primary" aria-current="page">ììœ ê²Œì‹œíŒ</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- Start Notice -->
<section class="section position-relative overflow-hidden"
         style=" top: 90px; padding-bottom: 90px;">
    <div class="content-wrapper container ">
        <div class="row">
            <div class="col-lg-6">
                <h2 class="fw-bold">ììœ  ê²Œì‹œíŒ</h2>
                <p class="text-muted">ì¼ìƒì„ ììœ ë¡­ê²Œ ê³µìœ í•˜ëŠ” ììœ ê²Œì‹œíŒì…ë‹ˆë‹¤.ğŸ¾</p>
            </div>
        </div>
        <hr class="my-4">
        <section class="flexbox pb-3">
            <div class="container">
                <section class="notice d-flex">
                    <div class="sch-cont">
                        <select id="search_select"  class="">
                            <option value="title">ì œëª©</option>
                            <option value="contents">ì œëª©+ë‚´ìš©</option>
                            <option value="writer">ì‘ì„±ì</option>
                        </select>
                        <input id="searchKeyword" name="searchKeyword" title="ê²€ìƒ‰ì–´ ì…ë ¥" class="q1" type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" />
                        <a href="#none" onclick="searchBoard()" class="btn btn-sm btn-secondary">ê²€ìƒ‰</a>
                        <button onclick="saveReq()" class="btn btn-sm btn-primary">ê¸€ì“°ê¸°</button><br>
                    </div>
                </section>
                <th:block th:if="${session.loginDTO == null}"><!-- ì„¸ì…˜ê°’ ê°€ì ¸ì˜¤ëŠ” hidden input -->
                    <input type="hidden" id="memberNick">
                </th:block>

                <th:block th:unless="${session.loginDTO == null}">
                    <input type="hidden" id="memberNick" th:value="${session.loginDTO.getMemberNick()}"><!-- ì„¸ì…˜ê°’ ê°€ì ¸ì˜¤ëŠ” hidden input -->
                </th:block>

            </div>

            <!-- board list area -->
            <div class="container mt-3">
                <div class="demo-wrapper content-block pb-0">
                    <div class="table data-table">
                        <div class="row" id="board_list"> <!--ê²Œì‹œíŒ ëª©ë¡ start-->
                        <table class="table table-responsive">
                            <colgroup>
                                <col width="60%"/>
                                <col width="13.33%"/>
                                <col width="13.33%"/>
                                <col width="13.33%"/>
                            </colgroup>
                            <thead class="bgl-gray-light">
                            <tr>
                                <th class="text-center">ì œëª©</th>
                                <th class="text-center">ì‘ì„±ì</th>
                                <th class="text-center">ì‘ì„±ì¼</th>
                                <th class="text-center">ì¡°íšŒìˆ˜</th>

                            </tr>
                            </thead>
                            <tbody>

                                <th:block th:unless="${boardList.isEmpty()}"><!-- ë¹„ì–´ìˆì§€ì•Šìœ¼ë©´ blockìœ¼ë¡œ ì‹¸ì„œ ì¶œë ¥ -->
                                    <span class="" th:each="board:${boardList}"><!-- board ê¸€ëª©ë¡ ë°˜ë³µì¶œë ¥ì½”ë“œ -->
                                        <input type="hidden" th:value="${board.bno}"/>
                                        <tr><!-- ê¸€ ë²ˆí˜¸ -->
                                            <td>
                                                <div class="d-flex">
                                                <a class="slider-overtext" th:href="@{|/board/community/${board.bno}|}" th:text="${board.title}"  style="cursor: pointer;" ></a>
                                                <span th:if="${board.communityCommentDTOList!=null}" class="text-center"> <!-- ëŒ“ê¸€ë¦¬ìŠ¤íŠ¸ -->
                                                 [<span th:text="${board.communityCommentDTOList.size()}" class="text-center"></span>]<!-- ëŒ“ê¸€ìˆ˜-->
                                            </span>
                                                </div>
                                            </td><!-- ì œëª©-->
                                            <td class="text-center" th:text="${board.writer}"></td> <!-- ê¸€ì“´ì´ (ë‹‰ë„¤ì„)-->
                                            <td th:text="${#temporals.format(board.createDate,'yyyy-MM-dd')}" class="text-center"></td><!-- ì‘ì„±ì¼-->
                                            <td class="text-center" th:text="${board.getHits()}"></td>
                                        </tr>
                                    </span>
                                </th:block>
                            </tbody>
                        </table>
                    </div>
                    <div class="pt-3 text-center section">
                        <th:block th:if="${boardList.isEmpty()}"><!-- ê²Œì‹œë¬¼ì´ì—†ì„ë•Œ -->
                            ê²Œì‹œë¬¼ì´ ì—†ì–´ìš”!
                        </th:block>
                    </div>
                </div>
                    <hr class="my-3">
                    <div class="pagination-block">
                        <nav aria-label="navigation">
                            <ul id="page_list" class="pagination justify-content-center">
                                <!-- ì²«ë²ˆì§¸ í˜ì´ì§€ë¡œ ì´ë™ -->
                                <!-- /board/paging?page=1 -->
                                <th:block th:if="${boardList.getTotalPages()!=1}">
                                    <li class="page-item"><a class="page-link" th:href="@{/board/community/(page=1)}">ì²˜ìŒ</a></li>
                                    <!-- ì´ì „ ë§í¬ í™œì„±í™” ë¹„í™œì„±í™” -->
                                    <!-- noticeBoardList.getNumber() ì‚¬ìš©ì:2í˜ì´ì§€ getNumber()=1 -->
                                    <li class="page-item"><a class="page-link"
                                                             th:href="${boardList.first} ? '#' : @{/board/community/(page=${boardList.number})}">ì´ì „</a>
                                    </li>
                                </th:block>
                                <th:block th:unless="${endPage!=1}">
                                    <li class="page-item"><a class="page-link" href="#">ì²˜ìŒ</a></li>
                                    <li class="page-item"><a class="page-link" href="#">ì´ì „</a></li>
                                </th:block>

                                <!-- í˜ì´ì§€ ë²ˆí˜¸ ë§í¬(í˜„ì¬ í˜ì´ì§€ëŠ” ìˆ«ìë§Œ)
                                        for(int page=startPage; page<=endPage; page++)-->
                                <th:block th:if="${boardList.getTotalPages()>=1}">
                        <span th:each="page: ${#numbers.sequence(startPage, endPage)}">
                        <!-- í˜„ì¬í˜ì´ì§€ëŠ” ë§í¬ ì—†ì´ ìˆ«ìë§Œ -->
                            <li class="page-item"><span class="page-link" th:if="${page==boardList.number+1}"
                                                        th:text="${page}"></span></li>
                            <!-- í˜„ì¬í˜ì´ì§€ ë²ˆí˜¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í˜ì´ì§€ë²ˆí˜¸ì—ëŠ” ë§í¬ë¥¼ ë³´ì—¬ì¤Œ -->
                            <li class="page-item"><span th:unless="${page==boardList.number+1}">
                                <a class="page-link" th:href="@{|/board/community/?page=${page}|}" th:text="${page}"></a>
                            </span></li>
                        </span>
                                </th:block>
                                <!-- ë‹¤ìŒ ë§í¬ í™œì„±í™” ë¹„í™œì„±í™”
                                    ì‚¬ìš©ì: 2í˜ì´ì§€, getNumber: 1, 3í˜ì´ì§€-->
                                <th:block th:if="${!boardList.isLast()}">
                                    <li class="page-item"><a class="page-link"
                                                             th:href="${boardList.last} ? '#' : @{/board/community/(page=${boardList.number + 2})}">ë‹¤ìŒ</a>
                                    </li>
                                    <!-- ë§ˆì§€ë§‰ í˜ì´ì§€ë¡œ ì´ë™ -->
                                    <li class="page-item"><a class="page-link"
                                                             th:href="${boardList.last}? '#' : @{/board/community/(page=${boardList.totalPages})}">ë§ˆì§€ë§‰</a>
                                    </li>
                                </th:block>
                                <th:block th:unless="${!boardList.isLast()}">
                                    <li class="page-item"><a class="page-link" href="#">ë‹¤ìŒ</a></li>
                                    <li class="page-item"><a class="page-link" href="#">ë§ˆì§€ë§‰</a></li>
                                </th:block>
                            </ul>
                        </nav>
                    </div>
                            </div>
                        </div>
                    </section>
                </div>
            </section>
<!-- start footer -->
<footer>
    <div th:replace="/footer :: footer"></div>
</footer>
<!-- end footer-->
        </body>
<script th:inline="javascript">

    //ê¸€ì“°ê¸° ë²„íŠ¼ ìŠ¤í¬ë¦½íŠ¸
    const saveReq = () => {
        const nick = document.querySelector("#memberNick").value;
        if(nick == '' || nick == null){
            alert("ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            location.href="/member/login";
        } else {
            location.href="/board/community/save"
        }
    }


    function searchBoard() {
        let searchType = document.getElementById("search_select").value;
        let searchKeyword = document.getElementById("searchKeyword").value;

        $.ajax({
            type: "GET",
            url: "/board/community/search",
            data: {
                "searchType": searchType,
                "searchKeyword": searchKeyword,
            },
            success: function (data) {
                console
                console.log("ê²€ìƒ‰ ì„±ê³µ");
            },
            error: function () {
                console.log("ê²€ìƒ‰ ì‹¤íŒ¨");
            }
        })
            .done(function (fragment) {
                console.log(fragment);
                $('#board_list').replaceWith(fragment);
            });
        searchBoardPage();
    }

    function searchBoardPage() {
        let searchType = document.getElementById("search_select").value;
        let searchKeyword = document.getElementById("searchKeyword").value;

        $.ajax({
            type: "POST",
            url: "/board/community/search/page",
            data: {
                "searchType": searchType,
                "searchKeyword": searchKeyword,
            },
            success: function (data) {
                console.log("ê²€ìƒ‰ ì„±ê³µ");
            },
            error: function () {
                console.log("ê²€ìƒ‰ ì‹¤íŒ¨");
            }
        })
            .done(function (fragment) {
                console.log(fragment);
                $('#page_list').replaceWith(fragment);
            });
    }

</script>

<!--Bootstrap Js-->
<script src="/js/bootstrap.bundle.min.js"></script>

<!-- Slider Js -->
<script src="/js/tiny-slider.js"></script>
<script src="/js/swiper.min.js"></script>

<!-- counter -->
<script src="/js/counter.init.js"></script>

<!-- App Js -->
<script src="/js/app.js"></script>

<!-- Scrollup -->
<script src="/js/jquery.scrollUp.min.js"></script>
</html>