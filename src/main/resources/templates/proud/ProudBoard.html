<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‚´ìƒˆë¼ ìë‘ ê²Œì‹œíŒ</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content=" "/>
    <meta name="keywords" content=""/>
    <meta content="Pichforest" name="author"/>

    <!-- Bootstrap css -->
    <link rel="shortcut icon" href="images/favicon.ico">

    <!-- Bootstrap css -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css" id="bootstrap-style"/>

    <!-- Material Icon Css -->
    <link rel="stylesheet" href="/css/materialdesignicons.min.css" type="text/css"/>

    <!-- Unicon Css -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css"/>

    <!-- Custom Css -->
    <link rel="stylesheet" href="/css/style.min.css" type="text/css"/>

    <!-- Ajaxë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ JQuery CDN ì ìš© -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
            integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

</head>
<body data-bs-spy="scroll" data-bs-target="#navbar-navlist" data-bs-offset="71">
<!--Start Navbar-->
<div th:replace="/header :: header"></div>
<!--end Navbar-->

<!-- Start MagazineBoard -->
<section class="section position-relative overflow-hidden"
         style=" top: 95px;">

    <div class="content-wrapper container ">
        <div class="row mt-4">
            <div class="col-lg-12">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb default mb-0">
                        <li class="breadcrumb-item">
                            <a href="index.html" class="text-muted">í™ˆ</a>
                        </li>
                        <li class="breadcrumb-item active text-primary" aria-current="page">ììœ ê²Œì‹œíŒ</li>
                    </ol>
                </nav>
            </div>
        </div>

    </div>
</section>
<section class="inner-blog section ">
    <!-- start container -->
    <div class="container">
        <div class="row">

            <div class="col-lg-6">
                <h2 class="fw-bold">ë‚´ìƒˆë¼ ìë‘ ê²Œì‹œíŒ</h2>
                <p class="text-muted">ë§¤ì¼ë§¤ì¼ í•¨ê»˜í•œ ì¶”ì–µ, ìš°ë¦¬ ë°˜ë ¤ë™ë¬¼ë“¤ì˜ ì¼ìƒ ì´ì•¼ê¸° ğŸ“·ğŸ¶ğŸ±ğŸ¾ </p>
            </div>
        </div>
        <hr class="my-4">
        <section class="notice d-flex">
            <div class="sch-cont">
                <select id="search_select" class="">
                    <option value="title">ì œëª©</option>
                    <option value="contents">ì œëª©+ë‚´ìš©</option>
                    <option value="writer">ì‘ì„±ì</option>
                </select>
                <input id="searchKeyword" name="searchKeyword" title="ê²€ìƒ‰ì–´ ì…ë ¥" class="q1" type="text"
                       placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"/>
                <button onclick="searchBoard();" class="btn btn-sm btn-outline-dark">ê²€ìƒ‰</button>
                <button onclick="saveReq()" class="btn btn-sm">ê¸€ì“°ê¸°</button>
                <br>
            </div>
        </section>
        <th:block th:if="${session.loginDTO == null}"><!-- ì„¸ì…˜ê°’ ê°€ì ¸ì˜¤ëŠ” hidden input start -->
            <input type="hidden" id="memberNick">
        </th:block>
        <th:block th:unless="${session.loginDTO == null}">
            <input type="hidden" id="memberNick" th:value="${session.loginDTO.getMemberNick()}">
        </th:block><!-- ì„¸ì…˜ê°’ ê°€ì ¸ì˜¤ëŠ” hidden input end -->

        <div class="row mt-5">
            <div class="col-lg-12">
                <div class="row" id="board_list"> <!--ê²Œì‹œíŒ ëª©ë¡ start-->
                    <div class="col-lg-4" th:each="board: ${boardList}">
                        <div class="blog-item">
                            <div class="blog-image position-relative">
                                <a th:href="@{|/board/proud/${board.bno}|(page=${boardList.number + 1})}">
                                    <img th:src="@{|/upload/${board.repositoryFileName.get(0)}|}" alt=""
                                         class="img-fluid">
                                    <div class="position-absolute top-0 end-0 mt-2 me-2 f-18">

                  <span class="badge rounded-pill bg-white py-2 px-2 text-muted">
                      <th:block th:if="${board.proudCommentDTOList!=null}">
                      <span class="ms-2"> <i class="mdi mdi-message-text-outline align-middle"
                                             th:text="${board.proudCommentDTOList.size()}"></i> </span>
                          </th:block>
                      <th:block th:unless="${board.proudCommentDTOList!=null}">
                           <span class="ms-2"> <i class="mdi mdi-message-text-outline align-middle"
                                                  th:text="0"></i> </span>
                      </th:block>
                      <span class="ms-2"> <i class="mdi mdi-eye align-middle" th:text="${board.hits}"></i> </span>
                      <th:block th:if="${board.proudLikeDTOList!=null}">
                      <span class="ms-2"> <i class="mdi mdi-heart"
                                             th:text="${board.proudLikeDTOList.size()}"></i> </span>
                          </th:block>
                      <th:block th:unless="${board.proudLikeDTOList!=null}">
                          <span class="ms-2"><i class="mdi mdi-heart" th:text="0"> </i></span>
                      </th:block>
                  </span>
                                    </div>
                                </a>
                            </div>
                            <div class="blog-content mt-3">
                                <h5 class="fw-bold slider-overtext"><a
                                        th:href="@{|/board/proud/${board.bno}|(page=${boardList.number + 1})}"
                                        th:text="${board.title}"></a></h5>
                                <p class="text-muted f-15 mb-3 slider-overtext"
                                   th:text="${#temporals.format(board.createDate,'yyyy-MM-dd')}"></p>
                            </div>
                        </div>
                    </div>
                </div><!--ê²Œì‹œíŒëª©ë¡ end-->
            </div>
            <div class="pagination-block">
                <nav aria-label="navigation">
                    <ul id="page_list" class="pagination justify-content-center">
                        <!-- ì²«ë²ˆì§¸ í˜ì´ì§€ë¡œ ì´ë™ -->
                        <!-- /board/paging?page=1 -->
                        <th:block th:if="${boardList.getTotalPages()!=1}">
                            <li class="page-item"><a class="page-link" th:href="@{/board/proud/(page=1)}">ì²˜ìŒ</a></li>
                            <!-- ì´ì „ ë§í¬ í™œì„±í™” ë¹„í™œì„±í™” -->
                            <!-- noticeBoardList.getNumber() ì‚¬ìš©ì:2í˜ì´ì§€ getNumber()=1 -->
                            <li class="page-item"><a class="page-link"
                                                     th:href="${boardList.first} ? '#' : @{/board/proud/(page=${boardList.number})}">ì´ì „</a>
                            </li>
                        </th:block>
                        <th:block th:unless="${endPage!=1}">
                            <li class="page-item"><a class="page-link" href="#">ì²˜ìŒ</a></li>
                            <li class="page-item"><a class="page-link" href="#">ì´ì „</a></li>
                        </th:block>

                        <!-- í˜ì´ì§€ ë²ˆí˜¸ ë§í¬(í˜„ì¬ í˜ì´ì§€ëŠ” ìˆ«ìë§Œ)
                                for(int page=startPage; page<=endPage; page++)-->
                        <th:block th:if="${boardList.getTotalPages()>=1}">
                        <span th:each="page: ${#numbers.sequence(startPage, endPage)}">
                        <!-- í˜„ì¬í˜ì´ì§€ëŠ” ë§í¬ ì—†ì´ ìˆ«ìë§Œ -->
                            <li class="page-item"><span class="page-link" th:if="${page==boardList.number+1}"
                                                        th:text="${page}"></span></li>
                            <!-- í˜„ì¬í˜ì´ì§€ ë²ˆí˜¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í˜ì´ì§€ë²ˆí˜¸ì—ëŠ” ë§í¬ë¥¼ ë³´ì—¬ì¤Œ -->
                            <li class="page-item"><span th:unless="${page==boardList.number+1}">
                                <a class="page-link" th:href="@{|/board/proud/?page=${page}|}" th:text="${page}"></a>
                            </span></li>
                        </span>
                        </th:block>
                        <!-- ë‹¤ìŒ ë§í¬ í™œì„±í™” ë¹„í™œì„±í™”
                            ì‚¬ìš©ì: 2í˜ì´ì§€, getNumber: 1, 3í˜ì´ì§€-->
                        <th:block th:if="${!boardList.isLast()}">
                            <li class="page-item"><a class="page-link"
                                                     th:href="${boardList.last} ? '#' : @{/board/proud/(page=${boardList.number + 2})}">ë‹¤ìŒ</a>
                            </li>
                            <!-- ë§ˆì§€ë§‰ í˜ì´ì§€ë¡œ ì´ë™ -->
                            <li class="page-item"><a class="page-link"
                                                     th:href="${boardList.last}? '#' : @{/board/proud/(page=${boardList.totalPages})}">ë§ˆì§€ë§‰</a>
                            </li>
                        </th:block>
                        <th:block th:unless="${!boardList.isLast()}">
                            <li class="page-item"><a class="page-link" href="#">ë‹¤ìŒ</a></li>
                            <li class="page-item"><a class="page-link" href="#">ë§ˆì§€ë§‰</a></li>
                        </th:block>
                    </ul>
                </nav>
            </div>


        </div>

    </div>
    <!-- end container -->
</section>

<!-- End MagazineBoard -->
<!-- Start footer-->
<div th:replace="/footer :: footer"></div>
<!-- end footer-->

<!--Bootstrap Js-->
<script src="/js/bootstrap.bundle.min.js"></script>

<!-- Slider Js -->
<script src="/js/tiny-slider.js"></script>
<script src="/js/swiper.min.js"></script>

<!-- counter -->
<script src="/js/counter.init.js"></script>

<!-- App Js -->
<script src="/js/app.js"></script>

<!-- Scrollup -->
<script src="/js/jquery.scrollUp.min.js"></script>
</body>

</html>

<script th:inline="javascript">
    const saveReq = () => {
        const nick = document.querySelector("#memberNick").value;

        if (nick == '' || nick == null) {
            alert("ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            location.href = "/member/login";
        } else {
            location.href = "/board/proud/save"
        }
    }

    function searchBoard() {
        let searchType = document.getElementById("search_select").value;
        let searchKeyword = document.getElementById("searchKeyword").value;

        $.ajax({
            type: "GET",
            url: "/board/proud/search",
            data: {
                "searchType": searchType,
                "searchKeyword": searchKeyword,
            },
            success: function (data) {
                console.log("ê²€ìƒ‰ ì„±ê³µ");
            },
            error: function () {
                console.log("ê²€ìƒ‰ ì‹¤íŒ¨");
            }
        })
            .done(function (fragment) {
                console.log(fragment);
                $('#board_list').replaceWith(fragment);
            });
        searchBoardPage();
    }

    function searchBoardPage() {
        let searchType = document.getElementById("search_select").value;
        let searchKeyword = document.getElementById("searchKeyword").value;

        $.ajax({
            type: "POST",
            url: "/board/proud/search/page",
            data: {
                "searchType": searchType,
                "searchKeyword": searchKeyword,
            },
            success: function (data) {
                console.log("ê²€ìƒ‰ ì„±ê³µ");
            },
            error: function () {
                console.log("ê²€ìƒ‰ ì‹¤íŒ¨");
            }
        })
            .done(function (fragment) {
                console.log(fragment);
                $('#page_list').replaceWith(fragment);
            });
    }

</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<!-- Scrollup -->
<script src="/js/jquery.scrollUp.min.js"></script>
<!--Bootstrap Js-->
<script src="/js/bootstrap.bundle.min.js"></script>
<!-- Scrollup -->
<script src="/js/jquery.scrollUp.min.js"></script>
</html>