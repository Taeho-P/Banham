<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>공지사항</title>
    <!-- Ajax를 사용하기 위한 JQuery CDN 적용 -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
</head>
<body>
<table>
    <tr>
        <th>게시글 번호</th>
        <td th:text="${board.bno}"></td>
    </tr>
    <tr>
        <th>제목</th>
        <td th:text="${board.boardTitle}"></td>
    </tr>
    <tr>
        <th>작성자</th>
        <td th:text="${board.boardWriter}"></td>
    </tr>
    <tr>
        <th>작성일</th>
        <td th:text="${#temporals.format(board.boardCreatedTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
    </tr>
    <th>수정일</th>
    <td th:if="${board.getBoardUpdatedTime() == null}"> - </td>
    <td th:unless="${board.getBoardUpdatedTime() == null}" th:text="${#temporals.format(board.getBoardUpdatedTime(), 'yyyy-MM-dd HH:mm:ss')}"></td>
    <tr>
        <th>조회수</th>
        <td th:text="${board.boardHits}"></td>
    </tr>
    <tr>
        <th>내용</th>
        <td th:text="${board.boardContents}"></td>
    </tr>
    <tr th:if="${board.hasFile == 'Y'}">
        <td th:each="fileName: ${board.storedFile}">  <!-- 파일 이름 List내의 파일 수만큼 반복문 -->
            <img th:src="@{|/upload/${fileName}|}" alt="">
        </td>
    </tr>

</table>
<button onclick="listReq()">목록</button>
<th:block th:if="${session.loginDTO != null}">
    <th:block th:if="${session.loginDTO.memberId == 'banham'}">
        <button onclick="updateReq()">수정</button>
        <button onclick="deleteReq()">삭제</button>
    </th:block>
</th:block>

</body>

<script th:inline="javascript">


    const listReq = () => {
        console.log("상세목록 조회");
        location.href = "/board/NoticeBoard?page=" + [[${page}]];
    }

    const updateReq = () => {
        console.log("수정 요청");
        const bno = [[${board.bno}]];
        location.href = "/board/Notice/update/" + bno;
    }

    const deleteReq = () => {
        console.log("삭제 요청");
        if(confirm("게시글을 삭제하시겠습니까?")) {
            const bno = [[${board.bno}]]
            location.href = "/board/Notice/delete/" + bno;
        }
    }
</script>
</html>